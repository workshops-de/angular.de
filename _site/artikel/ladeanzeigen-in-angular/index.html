<!DOCTYPE html>
<html lang="de">

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta charset="utf-8">
  <link rel="dns-prefetch" href="//www.google-analytics.com">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="keywords" content="">

  <title>Ladeanzeigen in Angular | Angular.DE</title>
  
  <meta name="description" content="Es ist eine Standardanforderung: eine Ladeanzeige soll den Nutzer unterhalten, w√§hrend er darauf wartet, dass der Server Daten bereitstellt.">
  

  
  <!-- Use canonical_url if available is post -->
  
  <link rel="canonical" href="http://localhost:4000/artikel/ladeanzeigen-in-angular/">
  
  

  

  <!-- Facebook Tags -->

  <meta name="og:title" content="Ladeanzeigen in Angular - Angular.DE">



  <meta property="og:description" content="Es ist eine Standardanforderung: eine Ladeanzeige soll den Nutzer unterhalten, w√§hrend er darauf wartet, dass der Server Daten bereitstellt.">


<meta property="og:url" content="http://localhost:4000/artikel/ladeanzeigen-in-angular/" />

  <meta property="og:type" content="article" />



  <meta property="og:image" content="http://localhost:4000/opengraph/default.png" />


<!-- Twitter Tags -->
<meta name="twitter:card" content="summary_large_image">


  <meta name="twitter:title" content="Ladeanzeigen in Angular - Angular.DE">


<meta name="twitter:site" content="@angular_de">
<meta name="twitter:creator" content="@angular_de">

  <meta name="twitter:description" content="Es ist eine Standardanforderung: eine Ladeanzeige soll den Nutzer unterhalten, w√§hrend er darauf wartet, dass der Server Daten bereitstellt.">


  <meta name="twitter:image" content="http://localhost:4000/artikel/ladeanzeigen-in-angular/banner.png">



  <link rel="icon" href="/assets/img/favicon.ico?v=2" type="image/x-icon" />
  <link rel="stylesheet" href="/assets/css/app.css?1750255920177315000">
  
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "url": "http://localhost:4000",
  "logo": "http://localhost:4000/assets/img/logo.svg",
  "sameAs":[
    "https://twitter.com/angular_de"
  ]
}
</script>
  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "http://localhost:4000"
    },
    
      
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Artikel",
      "item": "http://localhost:4000/artikel/"
    },
      
    
      
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Ladeanzeigen in Angular"
    }
      
    
  ]
}
</script>
</head>

<!-- Position relative is for Bootstrap TOC Plugin -->

<body style="position: relative" data-bs-spy="scroll" data-bs-target="#toc">
  <div class="navbar-wrapper">
  
  <div class="navbar-banner">
    <div class="d-flex align-items-center justify-content-center">
      <a href="https://workshops.de/schulungsthemen/angular?utm_source=angular_de&utm_campaign=group_discount&utm_medium=portal&utm_content=banner" target="_blank">Wir bieten einen <b>3=2 Rabatt</b> auf Schulungen an! Buche 2 Teilnehmer:innen und der/die Dritte ist kostenfrei.</a>
    </div>
  </div>



  <nav class="navbar navbar-main navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand p-0 me-4" href="/">
        <img alt="Angular.DE powered by workshops.de" src="/assets/img/logo-with-poweredby.svg" height="45">
      </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse mt-3 mt-sm-0" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/artikel/">Artikel</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/artikel/angular-tutorial-deutsch/">Tutorial</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/schulungen/angular-intensiv/">Schulung</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="https://workshops.de/seminare-schulungen-kurse/angular-lifetime?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=navigation" target="_blank">Lifetime</a>
          </li>-->
          <li class="nav-item ">
            <a class="nav-link" href="/ng-de-konferenz/">NG-DE Konferenz</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/team/">Team</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="/discord" target="_blank"><span class="visually-hidden">Community </span>Discord</a>
          </li> -->
          <!-- <li class="nav-item ">
            <a class="nav-link" href="/jobs/">Jobs</a>
          </li> -->
        </ul>
        <form class="form-inline d-none d-lg-inline" action="/suche/" method="GET">
          <input name="q" class="form-control navbar-search" type="search" placeholder="&#xF002;" autocomplete="off">
        </form>
      </div>
    </div><!-- .container -->
  </nav>
</div>


  


<main role="main" class="mt-4">
  <article lang="de" class="container">

    <div class="ratio mb-4" style="--bs-aspect-ratio: 30%;">
      <img src="banner.png" class="rounded w-100 object-fit-cover" alt="Artikel Header Bild zu Ladeanzeigen in Angular" />
    </div>
    <div class="row mb-5 gx-6">
      <div class="col-md-12 col-lg-8 mb-2">
        <h1 class="header-post-title">Ladeanzeigen in Angular</h1>

        <p class="text-muted">
          <small>
            
            <a href="/kategorie/angular/" class="badge bg-secondary text-bg-secondary text-uppercase">angular</a>
            
            <span class="ms-1 me-1">|</span>
            Nils Mehlhorn
            
            <a href="https://twitter.com/n_mehlhorn" target="_blank" style="margin-bottom: 5px;">
              <img src="/shared/assets/img/twitter-logo.svg" height="12" alt="Twitter Logo" />
            </a>
            
            
            <span class="ms-1 me-1">‚Ä¢</span> <time>13.07.2020</time>
            <span class="ms-1 me-1">|</span>
            


  10 Minuten


          </small>
        </p>


        <div class="c-content">
          <p>Es ist eine Standardanforderung: eine Ladeanzeige soll den Nutzer unterhalten, w√§hrend er darauf wartet, dass der Server Daten bereitstellt. Auch wenn man schnell einen Spinner von <a href="https://codepen.io/search/pens?q=spinner" rel="noreferrer noopener" target="_blank">CodePen</a> oder <a href="https://material.angular.io/components/progress-spinner/overview" rel="noreferrer noopener" target="_blank">Angular Material</a> eingebunden hat, mag es doch ein paar Unklarheiten geben, wenn man diesen nun zum richtigen Zeitpunkt in Angular anzeigen m√∂chte - das √§ndern wir mit diesem Artikel!</p>

<blockquote>
  <p>Die RxJS-Operatoren <code class="language-plaintext highlighter-rouge">indicate</code> und <code class="language-plaintext highlighter-rouge">prepare</code>, welche in diesem Artiekl entwickelt werden, sind in der Bibliothek <a href="https://github.com/nilsmehlhorn/ngx-operators" rel="noreferrer noopener" target="_blank">ngx-operators</a> erh√§ltlich. Ich freue mich √ºber jeden Stern auf GitHub, denn das hilft anderen Entwicklern die Bibliothek zu finden.</p>
</blockquote>

<h2 id="ladeanzeige-f√ºr-daten">Ladeanzeige f√ºr Daten</h2>

<p>Fangen wir mit einem h√§ufig vorkommenden Fall an: wir wollen eine Liste von Nutzern darstellen, welche asynchron von einem Service bereitgestellt wird. Eine einfache, aber technisch einwandfreie L√∂sung k√∂nnte wie folgt aussehen:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span>  <span class="p">{</span>

  <span class="nl">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[]</span>
  <span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">userService</span><span class="p">:</span> <span class="nx">UserService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nf">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">userService</span><span class="p">.</span><span class="nf">getAll</span><span class="p">().</span><span class="nf">pipe</span><span class="p">(</span>
      <span class="nf">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="p">).</span><span class="nf">subscribe</span><span class="p">(</span><span class="nx">users</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">users</span> <span class="o">=</span> <span class="nx">users</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Hier wird die Instanzvariable <code class="language-plaintext highlighter-rouge">users</code> verwendet um die Nutzer vorzuhalten, w√§hrend das Flag <code class="language-plaintext highlighter-rouge">loading</code> anzeigt, ob wir noch auf die Nutzerdaten warten oder diese bereits angekommen sind. Bevor wir subscriben - und damit den asynchronen Aufruf √ºber den Service starten - aktualisieren wir das Flag. Nachdem der Aufruf abgeschlossen ist, setzen wir es mithilfe des RxJS-Operators <a href="https://rxjs-dev.firebaseapp.com/api/operators/finalize" rel="noreferrer noopener" target="_blank">finalize</a> zur√ºck. Der Callback den wir an diesen Operator geben wird aufgerufen, sobald das zugrundeliegende Observable abgeschlossen ist - unabh√§ngig von dessen Ergebnis. Wenn wir hier hingegen nur mit dem ersten Callback von <code class="language-plaintext highlighter-rouge">subscribe</code> gearbeitet h√§tten, w√ºrde das Lade-Flag im Fehlerfall nicht zur√ºckgesetzt werden.</p>

<p>Eine dazugeh√∂riges View-Template k√∂nnte wie folgt aussehen:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="na">*ngIf=</span><span class="s">"!loading"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">*ngFor=</span><span class="s">"let user of users"</span><span class="nt">&gt;</span>
    {{ user.name }}
  <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;loading-indicator</span> <span class="na">*ngIf=</span><span class="s">"loading"</span><span class="nt">&gt;&lt;/loading-indicator&gt;</span>
</code></pre></div></div>

<p>Nun kann unsere Komponente f√ºr die meisten Aufrufe, welche auf diese Art Daten direkt in der View darstellen, mithilfe der <a href="https://v17.angular.io/api/common/AsyncPipe" rel="noreferrer noopener" target="_blank">AsyncPipe</a> wie folgt vereinfacht werden:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span>  <span class="p">{</span>

  <span class="nx">users$</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">[]</span><span class="o">&gt;</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">userService</span><span class="p">:</span> <span class="nx">UserService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nf">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">users$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">userService</span><span class="p">.</span><span class="nf">getAll</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Die Komponente stellt dann direkt ein RxJS-Observable <code class="language-plaintext highlighter-rouge">users$</code> f√ºr die View bereit. Dort binden wir die Nutzer aus diesem Datenstrom mit der <code class="language-plaintext highlighter-rouge">async as</code> Syntax an eine Template-Variable <code class="language-plaintext highlighter-rouge">users</code>:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="na">*ngIf=</span><span class="s">"users$ | async as users; else indicator"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">*ngFor=</span><span class="s">"let user of users"</span><span class="nt">&gt;</span>
    {{ user.name }}
  <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;ng-template</span> <span class="na">#indicator</span><span class="nt">&gt;</span>
  <span class="nt">&lt;loading-indicator&gt;&lt;/loading-indicator&gt;</span>
<span class="nt">&lt;/ng-template&gt;</span>
</code></pre></div></div>
<p>Indem wir die Template-Referenz <code class="language-plaintext highlighter-rouge">indicator</code> √ºber das <code class="language-plaintext highlighter-rouge">else</code> Schl√ºsselwort an die <code class="language-plaintext highlighter-rouge">*ngIf</code> Directive geben, sparen wir uns das manuelle Pflegen eines Lade-Flags. Dieser Ansatz ist deklarativer und verbindet beide View-Zust√§nde mittels if-else-Beziehung anstatt, dass wir zwei separate if-Bl√∂cke haben. Au√üerdem m√ºssen wir uns nicht mehr selber um die Subscription k√ºmmern - die AsyncPipe r√§umt diese mit der Komponente ordnungsgem√§√ü auf.</p>

<h2 id="ladeanzeige-f√ºr-aktionen">Ladeanzeige f√ºr Aktionen</h2>

<p>Wenn wir Aktionen wie das Erstellen eines Nutzers beim Klick auf einen Button durchf√ºhren m√∂chten, kommen wir mit der AsyncPipe nicht weiter. Hier m√ºssen wir immer noch in der Komponente manuell subscriben, da wir meist keine sinnvolle M√∂glichkeit haben, das resultierende Observable an die View zu binden.</p>

<p>Zun√§chst sei gesagt, dass es v√∂llig in Ordnung ist, hier wieder auf den Ansatz mit dem Lade-Flag zur√ºckzugreifen - auch wenn manche anderes behaupten m√∂gen. Lasst euch nicht vorzeitig auf unn√∂tige Optimierungen ein nur um ein bisschen Redundanz zu vermeiden. H√§ufig ist es wichtiger, dass Code einfach zu verstehen, zu testen und auch zu <a href="https://programmingisterrible.com/post/139222674273/write-code-that-is-easy-to-delete-not-easy-to" rel="noreferrer noopener" target="_blank">l√∂schen</a> ist.</p>

<p>Um den angesprochenen Use-Case umzusetzen, w√§re folgendes also durchaus machbar:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span> <span class="na">(click)=</span><span class="s">"create()"</span><span class="nt">&gt;</span>Create User<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">*ngIf=</span><span class="s">"loading"</span><span class="nt">&gt;</span>
  Creating, please wait <span class="nt">&lt;loading-indicator&gt;&lt;/loading-indicator&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserComponent</span>  <span class="p">{</span>

  <span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">userService</span><span class="p">:</span> <span class="nx">UserService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nf">create</span><span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">John Doe</span><span class="dl">"</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">userService</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="k">new</span> <span class="nc">User</span><span class="p">(</span><span class="nx">name</span><span class="p">)).</span><span class="nf">pipe</span><span class="p">(</span>
      <span class="nf">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="p">).</span><span class="nf">subscribe</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Aber lasst uns schauen, was wir machen k√∂nnen, wenn uns die zwei Zeilen zum expliziten √Ñndern des Lade-Flags dann doch noch zu viel in jeder Komponente sind.</p>

<h3 id="ansatz-mit-http-interceptor">Ansatz mit HTTP Interceptor</h3>

<p>H√§ufig wird empfohlen einen <a href="https://v17.angular.io/api/common/http/HttpInterceptor" rel="noreferrer noopener" target="_blank">HttpInterceptor</a> zu verwenden um nachzuhalten, ob irgendwelche HTTP-Aufrufe aktuell verarbeitet werden. Ein solcher Interceptor k√∂nnte wie folgt aussehen:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">LoadingInterceptor</span> <span class="k">implements</span> <span class="nx">HttpInterceptor</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">loadingService</span><span class="p">:</span> <span class="nx">LoadingService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nf">intercept</span><span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">HttpRequest</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="nx">HttpHandler</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">HttpEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
    <span class="c1">// hier k√∂nnte man auch noch auf eine bestimmte HTTP-Methode testen</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">loadingService</span><span class="p">.</span><span class="nf">attach</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">.</span><span class="nf">handle</span><span class="p">(</span><span class="nx">req</span><span class="p">).</span><span class="nf">pipe</span><span class="p">(</span>
      <span class="nf">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadingService</span><span class="p">.</span><span class="nf">detach</span><span class="p">(</span><span class="nx">req</span><span class="p">)),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Mit dieser Implementierung wird ein separater LoadingService mittels <code class="language-plaintext highlighter-rouge">attach(req)</code> benachrichtigt, sobald ein HTTP-Aufruf beginnt. Die Methode <code class="language-plaintext highlighter-rouge">detach(req)</code> informiert den Service schlie√ülich √ºber die Beendigung des Aufrufs - dank <code class="language-plaintext highlighter-rouge">finalize()</code> wieder unabh√§ngig vom Ergebnis. Nach jedem Aufruf k√∂nnte der Service dann pr√ºfen ob noch irgendwelche Anfragen ausstehen und so ein <strong>globales</strong> Lade-Flag verwalten.</p>

<p>Auch wenn der Nutzer mit diesem Ansatz eine grobe Indikation dar√ºber bekommt, ob die Anwendung gerade l√§dt, muss man sich die folgenden Aspekte vor Augen f√ºhren:</p>

<ol>
  <li>
    <p><strong>Man verliert Genauigkeit</strong>. Da wir nun kein Lade-Flag pro HTTP-Aufruf haben, sondern nur ein globales, k√∂nnen wir sp√§ter nicht mehr genau wissen, was gerade l√§dt. Auch wenn wir den LoadingService in irgendeine unserer Komponete injizieren um eine lokale Ladeanzeige darzustellen, bleibt die Information die wir eigentlich haben auf einen globalen Anwendungslevel. Es w√§re einfach semantisch falsch einen globalen Indikator f√ºr eine einzelne lokale Anfrage anzuzeigen.</p>
  </li>
  <li>
    <p><strong>Was soll der Nutzer mit einer globale Ladeanzeige machen?</strong> Deaktivieren wir <em>alles</em> w√§hrend <em>irgendwas</em> in der Anwendung noch l√§dt? Soll der Nutzer warten bis die globale Ladeanzeige fertig ist? Was ist, wenn eine Anfrage, die gerade nichts mit dem Use-Case des Nutzers zutun hat, h√§ngt?</p>
  </li>
  <li>
    <p><strong>Wir sind komisch verdrahtet</strong>. Erst gehen wir hin und verstecken alle HTTP-Aufrufe hinter einem Service um Logik und Ansicht voneinander zu trennen, nur um uns dann doch selbst zu hintergehen indem wir alles von HTTP-Anfragen abh√§ngig machen.</p>
  </li>
</ol>

<h3 id="globale-vs-kontextbezogene-ladeanzeige">Globale vs. kontextbezogene Ladeanzeige</h3>

<p>Wenn dir die Nachteile des Ansatzes mit HTTP Interceptor passen, kannst du ihn f√ºr eine globale Ladeanzeige wie etwa ein Fortschrittsleiste am oberen Bildschirmrand verwenden - siehe erste Abbildung.</p>

<p><img src="./global-indication.png" alt="Globale Ladeanzeige"></p>

<p>Ein paar Mainstream-Anwendungen machen das, es sieht ganz fancy aus und es gibt <a href="https://www.freakyjolly.com/http-global-loader-progress-bar-using-angular-interceptors/" rel="noreferrer noopener" target="_blank">Tutorials</a> und <a href="https://github.com/aitboudad/ngx-loading-bar" rel="noreferrer noopener" target="_blank">Bibliotheken</a> mit denen man dieses Verhalten gut umsetzen kann.</p>

<p>Wenn wir dem Nutzer aber genau sagen wollen, worauf er gerade wartet oder sogar bestimmte Interaktionen deaktivieren m√∂chten (siehe zweite Abbildung), m√ºssen wir uns was anderes √ºberlegen.</p>

<p><img src="./contextual-indication.png" alt="Kontextbezogene Ladeanzeige"></p>

<p>Es ist wichtig den Unterschied zu verstehen. Ansonsten zeigt man vielleicht f√§lschlicherweise an, dass eine Formular-Interaktion (bspw. unten link in der Abbildung) l√§dt, obwohl ein anderer Aufruf (bspw. das Widget ganz rechts) eigentlich f√ºr den Indikator verantwortlich ist.</p>

<h2 id="reaktiver-ansatz-mit-rxjs">Reaktiver Ansatz mit RxJS</h2>

<p>Um eine kontextbezogene Ladeanzeige umzusetzen ohne explizit ein Lade-Flag zu verwalten, k√∂nnen wir RxJS-Operatoren verwenden. Seit RxJS 6 ist es leicht m√∂glich seine <a href="https://rxjs-dev.firebaseapp.com/guide/operators" rel="noreferrer noopener" target="_blank">eigenen Operatoren</a> in Form von puren Funktionen zu definieren. Zuerst erstellen wir einen Operator der ein Callback aufruft, sobald auf ein Observable <code class="language-plaintext highlighter-rouge">subscribe</code> aufgefrufen wird. Das geht mit der RxJS-Methode <a href="https://rxjs-dev.firebaseapp.com/api/index/function/defer" rel="noreferrer noopener" target="_blank">defer</a>:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nf">prepare</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">callback</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">):</span> <span class="p">(</span><span class="nx">source</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span><span class="na">source</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="nf">defer</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">callback</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">source</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Dann erstellen wir einen weiteren Operator, welcher ein <a href="https://rxjs-dev.firebaseapp.com/api/index/class/Subject" rel="noreferrer noopener" target="_blank">RxJS-Subject</a> als Senke f√ºr den Lade-Zustand entgegennimmt. Mithilfe unseres neuen perpare-Operators aktualisieren wir dieses Subject sobald das eigentliche Observable abonniert wird via <code class="language-plaintext highlighter-rouge">indicator.next(true)</code>. Genauso nutzen wir den finalize-Operator um den Lade-Zustand mit <code class="language-plaintext highlighter-rouge">indicator.next(false)</code> wieder zur√ºckzusetzen, wenn das Observable abgeschlossen ist.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nf">indicate</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">indicator</span><span class="p">:</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span><span class="p">):</span> <span class="p">(</span><span class="nx">source</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span><span class="na">source</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="nx">source</span><span class="p">.</span><span class="nf">pipe</span><span class="p">(</span>
    <span class="nf">prepare</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">indicator</span><span class="p">.</span><span class="nf">next</span><span class="p">(</span><span class="kc">true</span><span class="p">)),</span>
    <span class="nf">finalize</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">indicator</span><span class="p">.</span><span class="nf">next</span><span class="p">(</span><span class="kc">false</span><span class="p">))</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Dann k√∂nnen wir den indicate-Operator in unserer Komponente wie folgt verwenden:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nc">UserComponent</span>  <span class="p">{</span>
  <span class="nx">loading$</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span><span class="p">()</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">userService</span><span class="p">:</span> <span class="nx">UserService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nf">create</span><span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">John Doe</span><span class="dl">"</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">userService</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="k">new</span> <span class="nc">User</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">pipe</span><span class="p">(</span><span class="nf">indicate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loading$</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">subscribe</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span> <span class="na">(click)=</span><span class="s">"create()"</span><span class="nt">&gt;</span>Create User<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">*ngIf=</span><span class="s">"loading$ | async"</span><span class="nt">&gt;</span>
  Creating, please wait <span class="nt">&lt;loading-indicator&gt;&lt;/loading-indicator&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Ich habe die Code-Snippets in ein vollst√§ndiges <a href="https://stackblitz.com/edit/ng-loading-indication" rel="noreferrer noopener" target="_blank">Beispiel auf StackBlitz</a> zusammengestellt - klick auf ‚ÄòRun Project‚Äô um die Ladenindikatoren zu sehen. Lass dich nicht von den blauen Indikatoren von StackBlitz irritieren, unsere sind rot.</p>

<iframe style="width: 100%; height: 450px" src="https://stackblitz.com/edit/ng-loading-indication?ctl=1&amp;embed=1&amp;file=src/app/app.component.ts&amp;view=preview">
</iframe>

<p>Du m√∂chtest den Artikel lieber in Englisch lesen? Das kannst du hier tun:
<a href="https://nils-mehlhorn.de/posts/indicating-loading-the-right-way-in-angular" rel="noreferrer noopener" target="_blank">https://nils-mehlhorn.de/posts/indicating-loading-the-right-way-in-angular</a></p>

        </div>

        <div class="text-end">
          <a class="btn btn-sm btn-link link-secondary" href="https://github.com/workshops-de/angular.de/edit/master/_posts/2020-07-13-ladeanzeigen-in-angular/2020-07-13-ladeanzeigen-in-angular.md" target="_blank" rel="noopener noreferrer nofollow">
            üêõ Diesen Artikel auf GitHub verbessern
          </a>
        </div>
      </div>
      <div class="col-lg-4 d-none d-lg-block">
        <div class="position-sticky c-top-4 ms-2">
          <p class="text-muted text-uppercase"><small>Inhaltsverzeichnis</small></p>
          <nav id="toc" data-toggle="toc"></nav>
          <!-- <hr> -->
          <!-- <div>
            <div class="h5 mb-2">Email Newsletter</div>
            <p class="small mb-2">Um alle Neuigkeiten zu erfahren, abonniere hier unseren Newsletter!</p>
            <a class="btn btn-sm btn-primary" href="/newsletter/redirect/article" target="_blank">
              Newsletter abonnieren
            </a>
          </div> -->

          <div class="mt-4">
            <a href="https://ng-de.org?utm_source=angular_de&utm_campaign=conference2025&utm_medium=portal&utm_content=article_sidebar"
               target="_blank"
               class="d-block text-decoration-none">
              <div class="card border-0 shadow-sm h-100" style="transition: all 150ms;">
                <img src="/assets/img/ngde-conf-ad.png"
                     class="card-img-top rounded-top"
                     alt="NG-DE Conference - November 5-7, 2025"
                     style="object-fit: cover; height: 100%;">
                <div class="card-body p-3">
                  <h5 class="card-title text-dark fw-bold mb-2">NG-DE Conference</h5>
                  <p class="card-text text-muted small mb-2">
                    The community-driven Angular conference in Germany
                  </p>
                  <div class="d-flex align-items-center mb-2">
                    <i class="fa fa-calendar text-primary me-2" style="width: 12px;"></i>
                    <small class="text-muted">November 5-7, 2025</small>
                  </div>
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa fa-map-marker text-primary me-2" style="width: 12px;"></i>
                    <small class="text-muted">Berlin</small>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="btn btn-primary btn-sm fw-bold text-uppercase" style="font-size: 0.7rem; letter-spacing: 0.05em; padding: 0.375rem 0.75rem;">
                      Get your ticket now!
                    </span>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <style>
            .mt-4 a:hover .card {
              box-shadow: 0 0 4px 0 rgba(0,0,0,0.35) !important;
            }

            .mt-4 a:hover .card-title {
              color: #0d6efd !important;
            }
          </style>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-12 col-lg-8">
        <!-- author info -->

<div class="row">
  <div class="col-sm-3 col-md-2">
    <span>
      <img alt="Nils Mehlhorn" class="shadow-sm rounded img-fluid lazy"
      src="/shared/assets/img/placeholder-image.svg"
      
      data-src="/assets/img/avatars/nils-mehlhorn.jpg"
      data-srcset="/assets/img/avatars/nils-mehlhorn.jpg"
      
      >
    </span>
  </div>
  <div class="col-sm-9 col-md-10">
    <p class="h5 text-truncate mb-2">
      Nils Mehlhorn
    </p>
    
      <p class="text-muted small">
        Nils ist Co-Founder von SceneLab und freiberuflicher Software Engineer mit Fokus auf Web-Technologien. In Artikeln und Vortr√§gen teilt er seine langj√§hrige Erfahrung mit Angular, TypeScript und Node.js sowie dem Java-basierten Spring Framework.

      </p>
    
    <div>
      
        <a href="https://nils-mehlhorn.de" class="btn btn-sm btn-outline-secondary" target="_blank" rel="noopener noreferrer">Website</a>
      
      
        <a href="https://github.com/nilsmehlhorn" class="btn btn-sm btn-outline-secondary" target="_blank">Github</a>
      
      
        <a href="https://twitter.com/n_mehlhorn" class="btn btn-sm btn-outline-secondary" target="_blank">Twitter</a>
      
      
    </div>
  </div>
</div>

        
      </div>
    </div>
  </article>

  <div class="container-fluid">
    <div class="row justify-content-md-center no-gutters mt-6">
      





  
  

  

  
    <div class="col-sm-6 p-0">
  <a class="ratio ratio-16x9 d-flex align-items-center c-img-bg-backdrop c-bg-img-cover-center lazy"
    style="background-image: url('/shared/assets/img/placeholder-image.svg');"
    href="/artikel/ng-de-conference-2025-ankuendigung/"
    data-style="background-image: url('/artikel/ng-de-conference-2025-ankuendigung/header.jpg')"
    >
    <div class="d-flex flex-column align-items-center justify-content-center px-4">
      <div class="text-center w-100 h2 text-white">
        NG-DE Conference 2025 wieder in Berlin
      </div>
      <button class="btn btn-outline-light">Hier weiterlesen</button>
    </div>
  </a>
</div>


    
    
  



  
  

  

  
    <div class="col-sm-6 p-0">
  <a class="ratio ratio-16x9 d-flex align-items-center c-img-bg-backdrop c-bg-img-cover-center lazy"
    style="background-image: url('/shared/assets/img/placeholder-image.svg');"
    href="/artikel/angular-tutorial-deutsch/"
    data-style="background-image: url('/artikel/angular-tutorial-deutsch/header.jpg')"
    >
    <div class="d-flex flex-column align-items-center justify-content-center px-4">
      <div class="text-center w-100 h2 text-white">
        Angular 20 Tutorial f√ºr Einsteiger
      </div>
      <button class="btn btn-outline-light">Hier weiterlesen</button>
    </div>
  </a>
</div>


    
    
      

    </div>
  </div>
</main>

  
<div class="newsletter-section d-print-none py-5">
  <div class="container">
    <p class="lead text-center">Du m√∂chtest immer auf dem aktuellsten Stand sein? - Melde Dich f√ºr unseren Newsletter an!</p>
    <div class="text-center">
      <a class="btn btn-primary" href="/newsletter/redirect/footer" target="_blank">
        Jetzt f√ºr Neuigkeiten zu Angular anmelden!
      </a>
    </div>
  </div>
</div>


  <footer>
  <div class="container">
    <div class="row">
      <div class="col-6 col-sm-3 mb-2">
        <div class="h4 mb-2">Angular.DE</div>
        <small>
          <span class="fw-bolder">Powered by <a href="https://workshops.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav">Workshops.DE</a></span>.
        </small>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Navigation</div>
        <ul class="footer-nav">
          <li><a href="/artikel/">Artikel</a></li>
          <li><a href="/tutorials/">Tutorials</a></li>
          <li><a href="/schulungen/">Schulungen</a></li>
          <li><a href="https://workshops.de/seminare-schulungen-kurse/angular-lifetime?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Lifetime</a></li>
          <li><a href="/meetups/">Meetups</a></li>
          <li><a href="/team/">Team</a></li>
          <li><a href="/presskit/">Presskit</a></li>
        </ul>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Communities</div>
        <ul class="footer-nav">
          <li><a href="https://reactjs.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">ReactJS.DE</a></li>
          <li><a href="https://vuejs.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">VueJS.DE</a></li>
          <li><a href="https://cloudnative.eu?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">CloudNative.EU</a></li>
          <li><a href="https://a11y-masterclass.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">a11y Masterclass</a></li>
          <li><a href="https://workshops.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Workshops.DE</a></li>
          <li><a href="https://www.coding-bootcamps.eu?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Coding Bootcamp Europe</a></li>
          <li><a href="https://ng-de.org?utm_source=angular_de&utm_campaign=conference2025&utm_medium=portal&utm_content=footer_nav" target="_blank">NG-DE Konferenz</a></li>
        </ul>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Folge uns hier</div>
        <ul class="footer-nav">
          <li>
            <a href="https://twitter.com/angular_de" target="_blank" rel="noopener">Twitter</a>
          </li>
          <li>
            <a href="https://github.com/workshops-de" target="_blank" rel="noopener">GitHub</a>
          </li>
          <li><a href="/feed.xml" target="_blank" rel="nofollow">RSS-Feed</a></li>
        </ul>
      </div>
    </div>
    <hr />
    <div class="row align-items-center">
      <div class="col-6 small">
        Copyright ¬© 2025 Symetics GmbH
      </div>
      <div class="col-6">
        <ul class="nav justify-content-end">
          <li class="nav-item">
            <a class="nav-link" href="/impressum/">Impressum</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/datenschutz/">Datenschutz</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>

  
  

  

  
  


  <script type="text/javascript">
  (() => {

    function lazyLoadImages() {
      var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

      if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.src = lazyImage.dataset.src;
              lazyImage.srcset = lazyImage.dataset.srcset;
              lazyImage.classList.remove("lazy");
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function(lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      } else {
        // Possibly fall back to a more compatible method here
        lazyImages.forEach(function(lazyImage) {
          lazyImage.src = lazyImage.dataset.src;
          lazyImage.srcset = lazyImage.dataset.srcset;
          lazyImage.classList.remove("lazy");
        });
      }
    }

    function lazyLoadBackgroundImages() {
      var lazyImages = [].slice.call(document.querySelectorAll("a.lazy"));

      if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.style = lazyImage.dataset.style;
              lazyImage.classList.remove("lazy");
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function(lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      } else {
        // Possibly fall back to a more compatible method here
        lazyImages.forEach(function(lazyImage) {
          lazyImage.src = lazyImage.dataset.src;
          lazyImage.srcset = lazyImage.dataset.srcset;
          lazyImage.classList.remove("lazy");
        });
      }
    }

    document.addEventListener("DOMContentLoaded", function() {
      lazyLoadImages();
      lazyLoadBackgroundImages();
      });
  })();
</script>

  <!-- JavaScript -->
  <script src="/shared/assets/js/vendor/jquery-3.2.1.slim.min.js"></script>
  <script src="/shared/assets/js/vendor/bootstrap.min.js"></script>
  <script src="/shared/assets/js/vendor/fp-3.0.0.min.js"></script>
  <script src="/shared/assets/js/vendor/headroom.min.js"></script>
  <script src="/shared/assets/js/app.js"></script>
  
  <script src="/shared/assets/js/vendor/bootstrap-toc-1.0.0.min.js"></script>
  
  
  
</body>

</html>
