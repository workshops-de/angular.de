<!DOCTYPE html>
<html lang="de">

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta charset="utf-8">
  <link rel="dns-prefetch" href="//www.google-analytics.com">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="keywords" content="">

  <title>NestJS Tutorial für Einsteiger | Angular.DE</title>
  
  <meta name="description" content="NestJS ist ein Framework für serverseitige NodeJS Implementierungen in Enterprise Projekten. In diesem Tutorial werden wir eine Rest-API implementieren.">
  

  
  <!-- Use canonical_url if available is post -->
  
  <link rel="canonical" href="http://localhost:4000/artikel/nestjs-tutorial/">
  
  

  

  <!-- Facebook Tags -->

  <meta name="og:title" content="NestJS Tutorial für Einsteiger - Angular.DE">



  <meta property="og:description" content="NestJS ist ein Framework für serverseitige NodeJS Implementierungen in Enterprise Projekten. In diesem Tutorial werden wir eine Rest-API implementieren.">


<meta property="og:url" content="http://localhost:4000/artikel/nestjs-tutorial/" />

  <meta property="og:type" content="article" />



  <meta property="og:image" content="http://localhost:4000/opengraph/default.png" />


<!-- Twitter Tags -->
<meta name="twitter:card" content="summary_large_image">


  <meta name="twitter:title" content="NestJS Tutorial für Einsteiger - Angular.DE">


<meta name="twitter:site" content="@angular_de">
<meta name="twitter:creator" content="@angular_de">

  <meta name="twitter:description" content="NestJS ist ein Framework für serverseitige NodeJS Implementierungen in Enterprise Projekten. In diesem Tutorial werden wir eine Rest-API implementieren.">


  <meta name="twitter:image" content="http://localhost:4000/artikel/nestjs-tutorial/header.jpg">



  <link rel="icon" href="/assets/img/favicon.ico?v=2" type="image/x-icon" />
  <link rel="stylesheet" href="/assets/css/app.css?1750255920177315000">
  
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "url": "http://localhost:4000",
  "logo": "http://localhost:4000/assets/img/logo.svg",
  "sameAs":[
    "https://twitter.com/angular_de"
  ]
}
</script>
  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "http://localhost:4000"
    },
    
      
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Artikel",
      "item": "http://localhost:4000/artikel/"
    },
      
    
      
    {
      "@type": "ListItem",
      "position": 3,
      "name": "NestJS Tutorial für Einsteiger"
    }
      
    
  ]
}
</script>
</head>

<!-- Position relative is for Bootstrap TOC Plugin -->

<body style="position: relative" data-bs-spy="scroll" data-bs-target="#toc">
  <div class="navbar-wrapper">
  
  <div class="navbar-banner">
    <div class="d-flex align-items-center justify-content-center">
      <a href="https://workshops.de/schulungsthemen/angular?utm_source=angular_de&utm_campaign=group_discount&utm_medium=portal&utm_content=banner" target="_blank">Wir bieten einen <b>3=2 Rabatt</b> auf Schulungen an! Buche 2 Teilnehmer:innen und der/die Dritte ist kostenfrei.</a>
    </div>
  </div>



  <nav class="navbar navbar-main navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand p-0 me-4" href="/">
        <img alt="Angular.DE powered by workshops.de" src="/assets/img/logo-with-poweredby.svg" height="45">
      </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse mt-3 mt-sm-0" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/artikel/">Artikel</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/artikel/angular-tutorial-deutsch/">Tutorial</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/schulungen/angular-intensiv/">Schulung</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="https://workshops.de/seminare-schulungen-kurse/angular-lifetime?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=navigation" target="_blank">Lifetime</a>
          </li>-->
          <li class="nav-item ">
            <a class="nav-link" href="/ng-de-konferenz/">NG-DE Konferenz</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/team/">Team</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="/discord" target="_blank"><span class="visually-hidden">Community </span>Discord</a>
          </li> -->
          <!-- <li class="nav-item ">
            <a class="nav-link" href="/jobs/">Jobs</a>
          </li> -->
        </ul>
        <form class="form-inline d-none d-lg-inline" action="/suche/" method="GET">
          <input name="q" class="form-control navbar-search" type="search" placeholder="&#xF002;" autocomplete="off">
        </form>
      </div>
    </div><!-- .container -->
  </nav>
</div>


  


<main role="main" class="mt-4">
  <article lang="de" class="container">

    <div class="ratio mb-4" style="--bs-aspect-ratio: 30%;">
      <img src="header.jpg" class="rounded w-100 object-fit-cover" alt="Artikel Header Bild zu NestJS Tutorial für Einsteiger" />
    </div>
    <div class="row mb-5 gx-6">
      <div class="col-md-12 col-lg-8 mb-2">
        <h1 class="header-post-title">NestJS Tutorial für Einsteiger</h1>

        <p class="text-muted">
          <small>
            
            <a href="/kategorie/nestjs/" class="badge bg-secondary text-bg-secondary text-uppercase">nestjs</a>
            
            <a href="/kategorie/tutorial/" class="badge bg-secondary text-bg-secondary text-uppercase">tutorial</a>
            
            <a href="/kategorie/nodejs/" class="badge bg-secondary text-bg-secondary text-uppercase">nodejs</a>
            
            <span class="ms-1 me-1">|</span>
            Robin Böhm
            
            <a href="https://twitter.com/robinboehm" target="_blank" style="margin-bottom: 5px;">
              <img src="/shared/assets/img/twitter-logo.svg" height="12" alt="Twitter Logo" />
            </a>
            
            
            <span class="ms-1 me-1">•</span> <time>21.06.2019</time>
            <span class="ms-1 me-1">|</span>
            


  21 Minuten


          </small>
        </p>


        <div class="c-content">
          <p>Dieses Tutorial erklärt euch die Grundlagen des Frameworks NestJS. Wir werden einige Code Beispiele benutzen die ihr via <a href="https://github.com/angularjs-de/angular-de-nestjs-tutorial" rel="noreferrer noopener" target="_blank">Git Repository</a> auf eurem eigenen Rechner ausprobieren könnt.
Dieses Tutorial richtet sich an Entwickler:innen, welche die Grundlagen des Webs, Client-Server Architektur und Rest-Schnittstellen bereits verstanden haben.
Ziel dieses Tutorials ist es, zu zeigen wie eine Rest-API mit Nest gebaut werden kann.
Wir benutzen hierbei als Datenbank eine PostgreSQL Instanz, es können aber auch andere (NoSQL) Datenbanken wie MongoDB genau so einfach angebunden werden. Weiterhin wird ein lauffähiges NodeJS in Version 10 oder höher für dieses Tutorial vorausgesetzt.</p>

<h2 id="was-ist-nestjs">Was ist NestJS?</h2>
<p>Der starke Einfluss von Angular bringt Konzepte wie Dependency Injection, Separation of Concerns und einen mächtigen Generator, welcher eine klare Architektur ermöglicht. Das auch über verschiedene Projektteams hinweg. NestJS liefert endlich eine gute Lösung für serverseitige NodeJS Implementierungen in Enterprise Projekten. In den meisten Fällen wird es benutzt, um API Endpoints für Frontends bereitzustellen.</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client Server API Illustration" class="lazy center" data-src="client-server-api.png" data-srcset="client-server-api.png"></p>

<h2 id="einordnung-zu-anderen-frameworks">Einordnung zu anderen Frameworks</h2>
<p>NestJS orientiert sich sehr stark an den Konzepten und der Architektur von Angular. Es lassen sich aber auch klare Ähnlichkeiten zu Frameworks wie Spring Boot, ASP.NET oder auch Ruby on Rails finden. Abgesehen von den verschiedenen Sprachen und Ökosystemen lassen sich klare Gemeinsamkeiten erkennen, welche diese Frameworks erfolgreich machen. NestJS greift diese ebenfalls auf und kombiniert diese Stärken sehr gut.</p>

<h3 id="der-fokus-auf-businesslogik">Der Fokus auf Businesslogik</h3>
<p>Durch den Einsatz von Elementen wie Dependency Injection und Decorators/Annotations kann der Fokus größtenteilsauf die Definition von Business Logic gelegt werden. Die dadurch reduzierte Komplexität führt zu deutlich verbesserten Lesbarkeit und auch langlebiger Wartbarkeit, da Updates am Framework über klare und einfache Schnittstellen getrennt sind und sich oft automatisch updaten lassen.</p>

<h3 id="die-nest-cli">Die Nest CLI</h3>
<p>Durch die Nest CLI lässt sich sehr viel Zeit gerade am Anfang eines Projektes sparen, da etliche Fragen zur organisation des Projektes bereits beantwortet sind:
Wie sieht unsere Ordnerstruktur aus?
Wie benennen wir Dateien?
Welche Formatierung nutzen wir? Tabs oder Spaces?
Wieso sieht unsere Struktur ganz anders aus als von Team B?
usw
Jeder kennt diese Situationen: Man möchte das eigentliche Problem lösen, muss aber erst einmal Zeit in das Projekt Setup investieren. Das Kommandozeilenwerkzeug Nest CLI gibt klare Strukturen vor. So kann hier teamübergreifend schnell und effizient gearbeitet werden.</p>

<h3 id="separation-of-concerns">Separation of Concerns</h3>
<p>Hinter diesem Schlagwort versteckt sich ein Design Pattern, welches sich aufgrund der langfristigen Wartbarkeit als sehr beliebt zeigt. Es geht hierbei unter anderem um den fachliche Schnitt unserer Module in Bausteine. Jeder Baustein löst hierbei eine spezielle und abgetrennte Aufgabe. Die Trennung unserer eigenen Businesslogik wird von dem Framework durch klare Grenzen und Vorgaben unterstützt. Oftmals sieht man dies auch in Verbindung mit Dependency Injection, welches eine klare Abtrennung bestimmter Funktionalitäten ermöglicht, wie z.B. Http Verbindungen oder die Implementierung eines bestimmten oAuth Providers. Die Architektur des Frameworks unterstützt diese Trennung sehr stark.</p>

<h3 id="atomare-und-testbare-module">Atomare und testbare Module</h3>
<p>Die Aufteilung in atomare und funktionale Bausteine in unseren Anwendungen ermöglicht Wiederverwendbarkeit und Testbarkeit. Beide Eigenschaften sind für viele Projekte ein essentieller Schlüssel zum Erfolg. Atomare Bausteine lassen sich gut testen. Getesteter Code lässt sich einfacher warten und ist langfristig günstiger. Die Wartbarkeit des Projektes ermöglicht langfristig schnelle Änderungen.</p>

<h2 id="vorteile-von-nestjs">Vorteile von NestJS</h2>
<p>Die oben genannten Vorteile gelten meist für alle der genannten Frameworks. Welche Vorteile bietet uns dann NestJS? Hierbei kommt es, wie so oft, immer auf die spezifische Projektsituation an. NestJS kann eine besonders gute Wahl in Verbindung mit einem modernen Frontend-Stack wie Angular, React oder Vue sein.</p>

<h3 id="die-gleiche-programmiersprache">Die gleiche Programmiersprache</h3>
<p>Durch die Benutzung von TypeScript(JavaScript) sowohl im Frontend als auch im Backend, müssen Entwickler:innen, welche an beiden Projekten arbeiten, nicht ständig zwischen zwei Sprachen und Konzepten hin und her wechseln. Das spart enorm viel kognitive Energie welche sinnvoller eingesetzt werden kann.</p>

<h3 id="wiederverwenden-von-dtos">Wiederverwenden von DTOs</h3>
<p>Unter dem Begriff DTO versteht man ein Data-Transfer-Objekt. Dies wird benutzt um die Serialisierung und De-Serialisierung bei Netzwerk-Kommunikation klar zu definieren. Im Fall einer Client-Server-Anwendung müssen diese Definitionen und Funktionen also jeweils auf beiden Seiten implementiert und synchron gehalten werden. Ein typischer Projektaufbau mit NestJS erlaubt aber die gleichzeitige Verwendung dieser Interface-Definitionen. Somit hat man eine klare Stelle für diese Definitionen und reduziert so die Gefahr einer potentielle zeitfressenden Fehlerquellen enorm.</p>

<h3 id="ähnliche-struktur">Ähnliche Struktur</h3>
<p>Nest ist sehr stark durch moderne Plattformen wie Angular inspiriert. Sowohl die Entwicklungsumgebung, die Laufzeitumgebung, als auch die Build-Prozesse sind sehr ähnlich im Front und Backend. Es kann also viel gelerntes Wissen direkt wiederverwendet werden. Die oftmals strikte Trennung zwischen Backend- und Frontend-Entwickler:innen kann aufgeweicht werden und eine bessere Kommunikation fördern.</p>

<h3 id="ähnliche-konzepte">Ähnliche Konzepte</h3>
<p>Sehr stark ausgeprägt in Verbindung mit Angular sind die gemeinsamen Konzepte und Paradigmen, welche genutzt werden, um die Architektur zu definieren. Geführt durch einen Generator(welcher auf Schematics basiert) können sowohl NestJS-Core als auch Third-Party-Module einfach integriert und aktualisiert werden. Die Benutzung von Dependency Injection, Decorators und Modulen ermöglicht ein Wiederverwenden von vielen Wissensbausteinen.</p>

<hr>

<div class="workshop-hint">
  <div class="h3">Keine Lust zu Lesen?</div>
  <div class="row mb-2">
    <div class="col-xs-12 col-md-6">
      <p>
        Nicht jeder lernt am besten aus Büchern und Artikeln. Lernen darf interaktiv sein und Spaß machen. Wir bieten euch auch
        <a target="_blank" href="/schulungen/nestjs-enterprise-applications/?utm_source=angular_de&amp;utm_campaign=tutorial&amp;utm_medium=portal&amp;utm_content=text-top-link">NestJS Schulungen</a> an, falls Ihr tiefer in die Thematik einsteigen wollt.
      </p>
      <p class="">
        <a target="_blank" href="/schulungen/nestjs-enterprise-applications/?utm_source=angular_de&amp;utm_campaign=tutorial&amp;utm_medium=portal&amp;utm_content=text-top-button">
          <button class="btn btn-danger">Mehr Informationen zur Schulung</button>
        </a>
      </p>
    </div>
    <div class="col-xs-12 col-md-6">
      <img class="img-fluid img-rounded lazy" style="margin-top:-20px" data-src="/assets/img/workshops/workshops-attendees.png" data-srcset="/assets/img/workshops/workshops-attendees.png" src="/shared/assets/img/placeholder-image.svg" alt="Teilnehmer:innen in unser Intensiv Schulung">
    </div>
  </div>
</div>
<hr>

<h2 id="konzepte">Konzepte</h2>
<p>NestJS hat viele Bausteine, jedoch sind einige davon essentiell um die grundlegende Funktionsweise des Frameworks zu verstehen. Genau diesen Konzepten werden wir uns als nächstes widmen. Es handelt sich hierbei um Controller, Services und Module. Um diese zu erklären nutzen wir einen minimalen Projekt-Aufbau einer Client/Server Architektur die auf einer Rest-Schnittstelle basiert.</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client Server API Illustration" class="lazy center" data-src="client-server-api.png" data-srcset="client-server-api.png"></p>

<h3 id="controller">Controller</h3>
<p>Das erste Konzept, welches wir uns ansehen, sind die Controller. Controller sind Klassen, welche sich um die Annahme und die Verarbeitung eines Requests kümmern. In einer typischen Anwendung haben wir einen Controller für jeden sogenannten Endpoint. Es kann mehrere Endpoints in einer Anwendung geben, welche natürlich auch verschachtelt auftreten können.</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client request to an API and controller routing" class="lazy center" data-src="nestjs-api-controller.png" data-srcset="nestjs-api-controller.png"></p>

<p>In unserem Beispiel haben wir eine API, welche drei Endpoints anbietet: Books, Events und Auth. In unserem Fall schauen wir uns den Events Endpoint an. Der EventController implementiert Funktionen, welche uns ermöglichen verschiedene Operationen auf eine Event Ressource auszuführen.</p>

<p>GET       /api/events/   findAll
GET       /api/events/1   findOne
PUT       /api/events/1   update
DELETE    /api/events/1   update</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client request to an API and controller routing" class="lazy center" data-src="nestjs-eventcontroller.png" data-srcset="nestjs-eventcontroller.png"></p>

<p>Diese Art von Schnittstellen werden oftmals als CRUD-Schnittstelle bezeichnet. Der Controller an dieser Stelle ist ausschließlich für die simple Definition der API Schnittstelle und dem Aufruf von Service-Funktionen zuständig, welche unseren Datenzugriff atomar kapseln.</p>

<h3 id="services">Services</h3>
<p>Das Konzept eines Services ermöglicht es uns, Funktionalitäten wie z.B. Zugriff auf bestimmte Daten an einer separaten Stelle atomar zu definieren (Seperation of Concerns). Durch diese Aufteilung lassen sich die verschiedenen Bereiche einfacher warten und auch testen.</p>

<p>Der EventService an dieser stelle enthält die notwendigen Konfigurationen um die Operationen auf einer beliebigen Datenbank für uns auszuführen. Mit Hilfe von Dependency Injection können wir den Service sehr einfach in unserem <code class="language-plaintext highlighter-rouge">EventController</code> zur Verfügung stellen ohne eine explizite Bindung eingehen zu müssen. Im Testfall kann dieser so durch ein Stub- oder Mock-Objekt ausgetauscht werden.</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client request to an API and controller routing" class="lazy center-80" data-src="nestjs-controller-di.png" data-srcset="nestjs-controller-di.png"></p>

<h3 id="module">Module</h3>
<p>Die bisher gezeigten Konzepte von Controllern und Services können wir in fachlichen Modulen zusammenfassen. Dies hat den Vorteil, dass wir klare Grenzen zwischen Fachlichkeiten definieren und auch bestimmte Module an anderen Stellen oder Projekten wiederverwenden können.</p>

<p><img src="/shared/assets/img/placeholder-image.svg" alt="Client request to an API and controller routing" class="lazy center-80" data-src="nestjs-module.png" data-srcset="nestjs-module.png"></p>

<h2 id="installation-der-cli">Installation der CLI</h2>
<p>Genug der Theorie! Mit den Grundkonzepten, die wir bisher gelernt haben können wir bereits unsere erste kleine NestJS Anwendung erstellen. Der erste Schritt hierbei ist die Installation der NestJS-CLI welche über npm erfolgt.</p>

<pre><code class="language-cmd">npm i -g @nestjs/cli
nest --version
nest --help
</code></pre>

<p>Durch Abfragen der Version oder das Anzeigen des Hilfetextes können wir am schnellsten validieren, ob die Installation erfolgreich war. Unter Umständen ist es möglich, dass ihr hierzu ein neues Terminal, bzw. eine neue Konsole öffnen müsst. Wurden beide Funktionen erfolgreich ausgeführt, können wir nun auch schon unser erstes Projekt generieren.</p>

<h2 id="erstellung-eines-projektes">Erstellung eines Projektes</h2>
<p>Wie ihr vielleicht schon in dem Hilfetext der Nest-CLI gesehen habt, gibt es viele Generator Funktionen, welche uns bei der Erstellung unserer Anwendung mit einer klaren Struktur und bereits aufgesetztem Build-Prozess unterstützen. Hierfür können wir das <code class="language-plaintext highlighter-rouge">new</code> command benutzen, welches uns unter dem angegebenen Namen einen neuen Ordner erstellt und eine Basis-Anwendung erstellt (auch Bootstrapping [sollte es nicht eher scaffolding sein?] genannt). Ich habe mich für den Namen “angular-de-nestjs-tutorial” entschieden. Ihr werdet bei der Installation wahrscheinlich gefragt, welchen Paketmanager ihr nutzen wollt, ich habe mich in diesem Tutorial für <code class="language-plaintext highlighter-rouge">npm</code> entschieden.</p>

<pre><code class="language-cmd">nest new angular-de-nestjs-tutorial
cd angular-de-nestjs-tutorial
npm run start
</code></pre>

<p>Nachdem unser Projekt generiert und die notwendigen <code class="language-plaintext highlighter-rouge">node_modules</code> geladen wurden, können wir  unseren Server mit <code class="language-plaintext highlighter-rouge">npm run start</code> das erste Mal starten. Unter der Adresse [localhost:3000] (http://localhost:3000) sollten wir nun die Ausgabe “Hello World!” sehen.
Herzlichen Glückwunsch! Wir haben ein lauffähigen Nest Server erstellt!</p>

<p>Viel passiert hier allerdings noch nicht. Wir haben einen <code class="language-plaintext highlighter-rouge">AppController</code> und ein <code class="language-plaintext highlighter-rouge">AppService</code>, welche uns nach der bereits bekannten Aufteilung die Ausgabe “Hello World” anzeigen.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Controller</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">AppController</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="k">readonly</span> <span class="nx">appService</span><span class="p">:</span> <span class="nx">AppService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
  <span class="nf">getHello</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">appService</span><span class="p">.</span><span class="nf">getHello</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="implementierung-einer-rest-schnittstelle">Implementierung einer Rest Schnittstelle</h2>
<p>Mit dieser Basis können wir uns nun an die eigentliche Aufgabe begeben: Die Erstellung einer Events Ressource unter dem API-Endpoint <code class="language-plaintext highlighter-rouge">/events/</code>. Im ersten Schritt werden wir hierzu einen Controller erstellen, welcher vorerst nur statische Daten zurückgibt. Im zweiten Schritt werden wir dann unsere Datenbank anbinden.</p>

<p>Um unsere Anwendung direkt in fachliche Komponenten aufzuteilen starten wir mit der Generierung eines neuen Modules mit dem Namen <code class="language-plaintext highlighter-rouge">events</code>.</p>

<pre><code class="language-cmd">nest g module events
</code></pre>

<p>Ausgabe in der Console:</p>

<pre><code class="language-cmd-output">CREATE /src/events/events.module.ts (83 bytes)
UPDATE /src/app.module.ts (316 bytes)
</code></pre>

<p>In der Ausgabe in unserer Konsole können wir sehen, dass wir einen neuen Unterordner mit einem Events-Modul generiert haben. Gleichzeitig hat uns dieses Modul automatisch in unserem App-Module über <code class="language-plaintext highlighter-rouge">imports</code> angemeldet.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">EventsModule</span><span class="p">],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppController</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppService</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">AppModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p>Als nächstes generieren wir einen Controller mit dem dazugehörigem Service. Hierfür nutzen wir die Generator Funktionen <code class="language-plaintext highlighter-rouge">controller</code>(kurz <code class="language-plaintext highlighter-rouge">co</code>) und <code class="language-plaintext highlighter-rouge">service</code>(kurz <code class="language-plaintext highlighter-rouge">s</code>).</p>

<pre><code class="language-cmd">nest g s events
nest g co events
</code></pre>

<p>Ausgabe in der Console:</p>

<pre><code class="language-cmd-output">CREATE /src/events/events.service.spec.ts (460 bytes)
CREATE /src/events/events.service.ts (90 bytes)
UPDATE /src/events/events.module.ts (163 bytes)

CREATE /src/events/events.controller.spec.ts (493 bytes)
CREATE /src/events/events.controller.ts (101 bytes)
UPDATE /src/events/events.module.ts (254 bytes)
</code></pre>

<p>Wie wir hier sehen, erkennt die CLI automatisch, dass bereits ein Events Modul existiert und fügt die benötigten Änderungen in unserem EventModul an.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">EventsService</span><span class="p">],</span>
  <span class="na">controllers</span><span class="p">:</span> <span class="p">[</span><span class="nx">EventsController</span><span class="p">],</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p>Im ersten Schritt werden wir hier ein statisches Array an Events zurückgeben. Um dies zu erreichen erstellen wir eine <code class="language-plaintext highlighter-rouge">findAll</code> Funktion in unserem Service. Der Rückgabewert hierbei ist ein einfaches Array mit einem Beispiel-Event.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsService</span> <span class="p">{</span>

    <span class="nf">findAll</span><span class="p">():</span> <span class="kr">any</span><span class="p">[]</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Angular.DE Intensiv Schulung</span><span class="dl">'</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In unserem Controller können wir dann über den Konstruktor diesen Service bereitstellen und die <code class="language-plaintext highlighter-rouge">findAll</code> Methode benutzen. Für die Basis-Route <code class="language-plaintext highlighter-rouge">/events/</code> implementieren wir hier ebenfalls eine <code class="language-plaintext highlighter-rouge">findAll</code> Methode und rufen dort den Service auf.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">events</span><span class="dl">'</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsController</span> <span class="p">{</span>

    <span class="nf">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">eventService</span><span class="p">:</span> <span class="nx">EventsService</span><span class="p">)</span> <span class="p">{}</span>

    <span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
    <span class="nf">findAll</span><span class="p">():</span> <span class="kr">any</span><span class="p">[]</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventService</span><span class="p">.</span><span class="nf">findAll</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Damit die Änderungen alle erkannt werden, müsst ihr den Prozess unter umständen einmal neustarten. Sind alle Dateien neu kompiliert, können wir über <a href="http://localhost:3000/events" rel="noreferrer noopener" target="_blank">localhost:3000/events</a> unseren statischen API-Call abfeuern. Das Ergebnis ist ein Array mit unserem Beispiel-Event.</p>

<h3 id="auslesen-von-parametern">Auslesen von Parametern</h3>

<p>Wir werden nicht alle Operationen statisch einbinden, jedoch möchte ich an dieser Stelle noch kurz zeigen wie wir Parameter aus einer URL auslesen. Indem wir in unserem <code class="language-plaintext highlighter-rouge">@Get</code> Decorator Parameter durch ein Doppelpunkt einleiten, können wir auf diese mit Hilfe des <code class="language-plaintext highlighter-rouge">@Param</code> Decorators zugreifen.  Wie ihr seht werden diese mit Hilfe eines String definiert, was uns ermöglicht auch mehrere Parameter zu benutzen. Da wir diese Funktion nur als Demonstration für Parameter benutzen nutzen wir an dieser Stelle eine rudimentär Implementierung.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">)</span>
<span class="nf">findOne</span><span class="p">(@</span><span class="nd">Param</span><span class="p">(</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">any</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventService</span><span class="p">.</span><span class="nf">findAll</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Natürlich gibt es neben <code class="language-plaintext highlighter-rouge">@Get</code> auch weitere Decorator wie <code class="language-plaintext highlighter-rouge">@Put</code>, <code class="language-plaintext highlighter-rouge">@Post</code>, <code class="language-plaintext highlighter-rouge">@Patch</code> und  <code class="language-plaintext highlighter-rouge">@Delete</code> um weitere HTTP-Verben abzubilden. Wir werden diese im nächsten Kapitel nutzen wenn wir unsere Datenbank mit echten Daten anbinden.</p>

<h2 id="anbinden-einer-datenbank">Anbinden einer Datenbank</h2>
<p>Nachdem wir uns die Grundlegenden Konzepte eines Endpoints mit Nest angesehen haben,
werden wir als nächstes nun eine Datenbank benutzen. In diesem Beispiel habe ich mich dafür entschieden eine Postgres Datenbank zu benutzen. Es gibt aber für alle anderen gängigen Datenbanken ebenfalls Connectoren.</p>

<p>Die Pakete welche wir hierzu benötigen sind <code class="language-plaintext highlighter-rouge">typeorm</code> und <code class="language-plaintext highlighter-rouge">pg</code>. Wir können diese mit folgendem Befehl über <code class="language-plaintext highlighter-rouge">npm</code> installieren.</p>

<pre><code class="language-cmd">npm install --save @nestjs/typeorm typeorm pg
</code></pre>

<h3 id="initialisieren-der-datenbankverbindung">Initialisieren der Datenbankverbindung</h3>

<p>Nach der erfolgreichen Installation der benötigten Pakete können wir grundlegende Konfiguration in unserem Projekt vornehmen. Hierzu müssen wir zuerst das TypeOrm Module in unserer Anwendung einbinden und mit <code class="language-plaintext highlighter-rouge">TypeOrmModule.forRoot()</code> im App-Module initialisieren.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TypeOrmModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/typeorm</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nf">forRoot</span><span class="p">(),</span>
  <span class="p">],</span>
<span class="c1">// ...</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Die Initialisierung erwartet eine Datei mit dem Namen <code class="language-plaintext highlighter-rouge">ormconfig.json</code> in unserem Root-Ordner, welche die Argumente für unsere Datenbank Verbindung definiert. Der Standard nutzer bei Postgres ist der aktuelle Nutzer, was in meinem Fall  <code class="language-plaintext highlighter-rouge">robinboehm</code> ist. Des Weiteren habe ich eine Datenbank mit dem Namen <code class="language-plaintext highlighter-rouge">angular-de-nestjs-tutorial</code> angelegt. Ich nutze hierfür das Tool <a href="https://eggerapps.at/postico/" rel="noreferrer noopener" target="_blank">PostiCo für Mac</a> in der Trial Version. Der Parameter <code class="language-plaintext highlighter-rouge">entities</code>  kann erstmal so übernommen werden, wir werden im nächsten Abschnitt lernen was es damit auf sich hat.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgres"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"robinboehm"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"angular-de-nestjs-tutorial"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*.entity{.ts,.js}"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"synchronize"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Falls es Probleme bei der Verbindung gibt, bekommt ihr direkt eine Fehlermeldung in der Konsole.</p>

<pre><code class="language-cmd-output">[TypeOrmModule] Unable to connect to the database. Retrying (1)... +35ms
Error: connect ECONNREFUSED 127.0.0.1:5433
</code></pre>

<p>Diese sind auch meistens sehr aussagekräftig, solltet ihr hierbei auf eine Fehlermeldung stoßen mit der ihr nicht weiter kommt, schreibt diese gerne in die Kommentare oder meldet euch bei mir. Ein Fehler auf den ich bei der ersten Installation gestoßen bin ist die Fehlermeldung <code class="language-plaintext highlighter-rouge">MissingDriverError: Wrong driver: "pg" given.</code>, da ich in der <code class="language-plaintext highlighter-rouge">ormconfig.json</code> als type <code class="language-plaintext highlighter-rouge">pg</code> angegeben habe (so wie das Node-Paket heißt). Richtig ist an dieser stelle aber aber <code class="language-plaintext highlighter-rouge">postgres</code>.</p>

<p>Wenn alles funktioniert, solltet ihr folgende Zeilen in der Ausgabe eures Servers sehen.</p>

<pre><code class="language-cmd-output">[InstanceLoader] TypeOrmCoreModule dependencies initialized
[NestApplication] Nest application successfully started
</code></pre>

<h3 id="repository-pattern">Repository pattern</h3>
<p>Nun werden wir als nächstes unsere Event-Ressource mit der Datenbank verbinden. Um dies zu erreichen werden wir als erstes eine sogenannte <code class="language-plaintext highlighter-rouge">Entity</code> anlegen. Dies ist eine Klasse, welche mit Hilfe bestimmter <code class="language-plaintext highlighter-rouge">typeorm Decorator</code> definiert welche Tabelle und welche Spalten mit dieser Art Objekten verknüpft sind. Wir benutzen hierfür die Dekoratoren <code class="language-plaintext highlighter-rouge">Entity</code>, <code class="language-plaintext highlighter-rouge">PrimaryGeneratedColumn</code> und `Column. Und um es einfach zu halten enthält unsere Event Klasse bisher nur eine ID und ein Namen.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Entity</span><span class="p">,</span> <span class="nx">Column</span><span class="p">,</span> <span class="nx">PrimaryGeneratedColumn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typeorm</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entity</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">Event</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">PrimaryGeneratedColumn</span><span class="p">()</span>
  <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Der Name dieser Datei ist <code class="language-plaintext highlighter-rouge">event.entity.ts</code>. Die Erweiterung des Dateinamens <code class="language-plaintext highlighter-rouge">.entity.ts</code> an dieser Stelle ist wichtig, da das TypeOrm-Modul über die <code class="language-plaintext highlighter-rouge">ormconfig.json</code> diese Entity automatisch findet.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"src/**/*.entity{.ts,.js}"</span><span class="p">]</span><span class="err">,</span><span class="w">
</span></code></pre></div></div>

<p>Damit unsere Nest-Anwendung ebenfalls von dieser Entity weiß, müssen wir das Event zusätzlich noch in unserem Event-Modul via <code class="language-plaintext highlighter-rouge">TypeOrmModule.forFeature([Event])</code> anmelden.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">TypeOrmModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/typeorm</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Event</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./event.entity</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// ..</span>

<span class="p">@</span><span class="nd">Module</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">TypeOrmModule</span><span class="p">.</span><span class="nf">forFeature</span><span class="p">([</span><span class="nx">Event</span><span class="p">])]</span>
<span class="c1">// ..</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsModule</span> <span class="p">{}</span>
</code></pre></div></div>

<p>Sobald wir dies erledigt haben können wir unseren Service mit einem sogenannten  <code class="language-plaintext highlighter-rouge">Repository</code> verbinden. Ein Repository ist eine generische Abstraktion von TypeOrm und ermöglicht uns den Zugriff auf die Datenbank über ein sehr einfaches Interface. Wir können es via Dependency Injection und dem Decorator  <code class="language-plaintext highlighter-rouge">@InjectRepository(Event)</code> in unserem Service verfügbar machen.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">InjectRepository</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nestjs/typeorm</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Event</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./event.entity</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Repository</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typeorm</span><span class="dl">'</span><span class="p">;</span>


<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsService</span> <span class="p">{</span>

    <span class="nf">constructor</span><span class="p">(</span>
        <span class="p">@</span><span class="nd">InjectRepository</span><span class="p">(</span><span class="nx">Event</span><span class="p">)</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="nx">eventRepository</span><span class="p">:</span> <span class="nx">Repository</span><span class="o">&lt;</span><span class="nx">Event</span><span class="o">&gt;</span><span class="p">,</span>
      <span class="p">)</span> <span class="p">{}</span>

    <span class="nf">findAll</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Event</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventRepository</span><span class="p">.</span><span class="nf">find</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nf">findOne</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Event</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventRepository</span><span class="p">.</span><span class="nf">findOne</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Über das <code class="language-plaintext highlighter-rouge">eventRepository</code> können wir nun unsere Abfragen an die Datenbank stellen. Wir nutzen hierbei die Funktionen <code class="language-plaintext highlighter-rouge">find()</code> und <code class="language-plaintext highlighter-rouge">findOne()</code>. Diese Funktionen geben jeweils ein Promise zurück, weswegen wir das Interface unserer eigenen Methode ebenfalls anpassen müssen. Mehr Änderungen müssen wir an dieser Stelle aktuell aber nicht vornehmen. Die letzte Änderung die fehlt, ist die Anpassung der Rückgabewerte in unserem Controller. Nest kann hierbei problemlos mit Promises umgehen, womit wir hier nur die Rückgabe-Typen in unserem Controller anpassen müssen.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  ...</span>
<span class="p">@</span><span class="nd">Controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">events</span><span class="dl">'</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EventsController</span> <span class="p">{</span>
<span class="c1">// ...</span>
    <span class="p">@</span><span class="nd">Get</span><span class="p">()</span>
    <span class="nf">findAll</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Event</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventService</span><span class="p">.</span><span class="nf">findAll</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">)</span>
    <span class="nf">findOne</span><span class="p">(@</span><span class="nd">Param</span><span class="p">(</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="kr">any</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventService</span><span class="p">.</span><span class="nf">findOne</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Nach einem Neustart unseres Servers solltet ihr nun über die URL <code class="language-plaintext highlighter-rouge">http://localhost:3000/events</code> ein leeres Array von Events bekommen. Ich habe mir an dieser Stelle mit Postico manuell zwei Datensätze in die Tabelle geschrieben, um die Verbindung auch mit Daten zu testen. Ihr könnt dann also auch über z.B. <code class="language-plaintext highlighter-rouge">http://localhost:3000/events/1</code> auf das Event mit der ID 1 zugreifen.</p>

<h3 id="potentielle-fehler">Potentielle Fehler</h3>
<p>An dieser Stelle bin ich in ein paar Fehler gelaufen, die euch vielleicht auch passiert sind.</p>

<h4 id="tabelle-bereits-manuell-erstellt">Tabelle bereits manuell erstellt</h4>
<p>Wenn ihr die Tabelle bereits vorher manuell erstellt habt oder eine bestehende Tabelle aus einem anderen Projekt benutzt, bekommt ihr den Fehler:  <code class="language-plaintext highlighter-rouge">QueryFailedError: column "name" contains null values</code>. Dies passiert weil TypeORM versucht diese Tabelle selber anzulegen bzw zu migrieren. Dieses Verhalten wird über die Konfiguration <code class="language-plaintext highlighter-rouge">"synchronize": true</code> in euer <code class="language-plaintext highlighter-rouge">ormconfig.json</code> ausgelöst. Wenn ihr dieses Verhalten nicht wollt, könnt ihr diese Zeile einfach löschen oder auf <code class="language-plaintext highlighter-rouge">false</code> setzen.</p>

<h4 id="server-über-startdev-gestartet">Server über start:dev gestartet</h4>

<pre><code class="language-cmd-output">import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm';
SyntaxError: Unexpected token
</code></pre>

<p>Dies passiert, wenn ihr euren Server über <code class="language-plaintext highlighter-rouge">npm run start:dev</code> startet. Diese Option startet den Server im Watch-Mode, kompiliert bei jeder Änderung die jeweilige Datei neu und liefert die Anwendung direkt aus dem <code class="language-plaintext highlighter-rouge">dist</code> Verzeichnis aus. Das hat zur Folge, dass es dort kein <code class="language-plaintext highlighter-rouge">src</code> Verzeichnis mehr gibt und alle Dateien bereits zu <code class="language-plaintext highlighter-rouge">.js</code> Dateien transpiliert wurden. Wenn ihr den Server weiter in diesem Modus betreiben wollt, müsst ihr ebenfalls eure <code class="language-plaintext highlighter-rouge">ormconfig.json</code> anpassen:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dist/**/*.entity{.ts,.js}"</span><span class="p">]</span><span class="err">,</span><span class="w">
</span></code></pre></div></div>

<h2 id="fazit">Fazit</h2>
<p>Zusammenfassend würde ich behaupten: NestJS schließt endlich eine Lücke für Backend-Entwickler:innen die sich mit anderen NodeJS-Frameworks wie Express bisher eher schwer getan haben.
Die Konzepte fügen sich sehr angenehm an bereits bestehende Konzepte aus der Angular oder auch Java Spring Welt. Die Lernkurve ist relativ flach und es werden viele Module mitgeliefert welche die tägliche Arbeit durch eine angenehme Abstraktion sehr erleichern.
Des Weiteren legt das Framework ein starken Fokus auf Test, wodurch es für professionelle Projekte ein oft schmerzhaften Punkt von Beginn an löst.
Die ersten Schritte gehen leicht von der Hand und machen Spaß auf mehr!</p>

<h2 id="eure-meinung">Eure Meinung?</h2>
<p>Was haltet ihr von NestJS und diesem Tutorial? Hinterlasst mir gerne einen Kommentar.
Ich werde dieses Tutorial regelmäßig updaten und erweitern.
Weiterhin werde ich die nächsten Wochen auch noch speziellere Themen wie GraphQL mit Nest behandeln!</p>

<p>Danke fürs lesen!</p>

<hr>

<div class="workshop-hint">
  <div class="h3">Bereit mehr NestJS zu lernen?</div>
  <div class="row mb-2">
    <div class="col-xs-12 col-md-6">
      <p>
        Nicht jeder lernt am besten aus Büchern und Artikeln. Lernen darf interaktiv sein und Spaß machen. Wir bieten euch auch
        <a target="_blank" href="/schulungen/nestjs-enterprise-applications/?utm_source=angular_de&amp;utm_campaign=tutorial&amp;utm_medium=portal&amp;utm_content=text-bottom-link">NestJS Schulungen</a> an, falls Ihr tiefer in die Thematik einsteigen wollt.
      </p>
      <p class="">
        <a target="_blank" href="/schulungen/nestjs-enterprise-applications/?utm_source=angular_de&amp;utm_campaign=tutorial&amp;utm_medium=portal&amp;utm_content=text-bottom-button">
          <button class="btn btn-danger">Mehr Informationen zur Schulung</button>
        </a>
      </p>
    </div>
    <div class="col-xs-12 col-md-6">
      <img class="img-fluid img-rounded lazy" data-src="/assets/img/workshops/workshops-attendees-2.jpg" data-srcset="/assets/img/workshops/workshops-attendees-2.jpg" src="/shared/assets/img/placeholder-image.svg" alt="Teilnehmer:innen in unser Intensiv Schulung">
    </div>
  </div>
</div>
<hr>


        </div>

        <div class="text-end">
          <a class="btn btn-sm btn-link link-secondary" href="https://github.com/workshops-de/angular.de/edit/master/_posts/2019-07-15-nestjs-tutorial/2019-07-15-nestjs-tutorial.md" target="_blank" rel="noopener noreferrer nofollow">
            🐛 Diesen Artikel auf GitHub verbessern
          </a>
        </div>
      </div>
      <div class="col-lg-4 d-none d-lg-block">
        <div class="position-sticky c-top-4 ms-2">
          <p class="text-muted text-uppercase"><small>Inhaltsverzeichnis</small></p>
          <nav id="toc" data-toggle="toc"></nav>
          <!-- <hr> -->
          <!-- <div>
            <div class="h5 mb-2">Email Newsletter</div>
            <p class="small mb-2">Um alle Neuigkeiten zu erfahren, abonniere hier unseren Newsletter!</p>
            <a class="btn btn-sm btn-primary" href="/newsletter/redirect/article" target="_blank">
              Newsletter abonnieren
            </a>
          </div> -->

          <div class="mt-4">
            <a href="https://ng-de.org?utm_source=angular_de&utm_campaign=conference2025&utm_medium=portal&utm_content=article_sidebar"
               target="_blank"
               class="d-block text-decoration-none">
              <div class="card border-0 shadow-sm h-100" style="transition: all 150ms;">
                <img src="/assets/img/ngde-conf-ad.png"
                     class="card-img-top rounded-top"
                     alt="NG-DE Conference - November 5-7, 2025"
                     style="object-fit: cover; height: 100%;">
                <div class="card-body p-3">
                  <h5 class="card-title text-dark fw-bold mb-2">NG-DE Conference</h5>
                  <p class="card-text text-muted small mb-2">
                    The community-driven Angular conference in Germany
                  </p>
                  <div class="d-flex align-items-center mb-2">
                    <i class="fa fa-calendar text-primary me-2" style="width: 12px;"></i>
                    <small class="text-muted">November 5-7, 2025</small>
                  </div>
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa fa-map-marker text-primary me-2" style="width: 12px;"></i>
                    <small class="text-muted">Berlin</small>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="btn btn-primary btn-sm fw-bold text-uppercase" style="font-size: 0.7rem; letter-spacing: 0.05em; padding: 0.375rem 0.75rem;">
                      Get your ticket now!
                    </span>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <style>
            .mt-4 a:hover .card {
              box-shadow: 0 0 4px 0 rgba(0,0,0,0.35) !important;
            }

            .mt-4 a:hover .card-title {
              color: #0d6efd !important;
            }
          </style>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-12 col-lg-8">
        <!-- author info -->

<div class="row">
  <div class="col-sm-3 col-md-2">
    <span>
      <img alt="Robin Böhm" class="shadow-sm rounded img-fluid lazy"
      src="/shared/assets/img/placeholder-image.svg"
      
      data-src="/assets/img/gravatars/e9e044629f5324a4a3c27302f0d4efcc-160x160.jpg"
      data-srcset="/assets/img/gravatars/e9e044629f5324a4a3c27302f0d4efcc-160x160.jpg"
      
      >
    </span>
  </div>
  <div class="col-sm-9 col-md-10">
    <p class="h5 text-truncate mb-2">
      Robin Böhm
    </p>
    
      <p class="text-muted small">
        Robin beschäftigt sich seit 2012 intensiv mit der Erstellung client-seitiger Web-Applikationen. 2014 hat er das erste deutschsprachige Buch zum Thema AngularJS geschrieben und ist Mitgründer der Platform Angular.DE. Mit seinem Schulungs-Team hat er bereits über 1200 Unternehmen den erfolgreichen Start mit Angular ermöglicht.

      </p>
    
    <div>
      
      
        <a href="https://github.com/robinboehm" class="btn btn-sm btn-outline-secondary" target="_blank">Github</a>
      
      
        <a href="https://twitter.com/robinboehm" class="btn btn-sm btn-outline-secondary" target="_blank">Twitter</a>
      
      
    </div>
  </div>
</div>

        
      </div>
    </div>
  </article>

  <div class="container-fluid">
    <div class="row justify-content-md-center no-gutters mt-6">
      





  
  

  

  



  
  

  

  
    <div class="col-sm-6 p-0">
  <a class="ratio ratio-16x9 d-flex align-items-center c-img-bg-backdrop c-bg-img-cover-center lazy"
    style="background-image: url('/shared/assets/img/placeholder-image.svg');"
    href="/artikel/angular-tutorial-deutsch/"
    data-style="background-image: url('/artikel/angular-tutorial-deutsch/header.jpg')"
    >
    <div class="d-flex flex-column align-items-center justify-content-center px-4">
      <div class="text-center w-100 h2 text-white">
        Angular 20 Tutorial für Einsteiger
      </div>
      <button class="btn btn-outline-light">Hier weiterlesen</button>
    </div>
  </a>
</div>


    
    
  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  



  
  

  

  
    <div class="col-sm-6 p-0">
  <a class="ratio ratio-16x9 d-flex align-items-center c-img-bg-backdrop c-bg-img-cover-center lazy"
    style="background-image: url('/shared/assets/img/placeholder-image.svg');"
    href="/artikel/angular-redux-einfuehrung/"
    data-style="background-image: url('/artikel/angular-redux-einfuehrung/header.jpg')"
    >
    <div class="d-flex flex-column align-items-center justify-content-center px-4">
      <div class="text-center w-100 h2 text-white">
        Redux in Angular - Einführung und Konzepte
      </div>
      <button class="btn btn-outline-light">Hier weiterlesen</button>
    </div>
  </a>
</div>


    
    
      

    </div>
  </div>
</main>

  
<div class="newsletter-section d-print-none py-5">
  <div class="container">
    <p class="lead text-center">Du möchtest immer auf dem aktuellsten Stand sein? - Melde Dich für unseren Newsletter an!</p>
    <div class="text-center">
      <a class="btn btn-primary" href="/newsletter/redirect/footer" target="_blank">
        Jetzt für Neuigkeiten zu Angular anmelden!
      </a>
    </div>
  </div>
</div>


  <footer>
  <div class="container">
    <div class="row">
      <div class="col-6 col-sm-3 mb-2">
        <div class="h4 mb-2">Angular.DE</div>
        <small>
          <span class="fw-bolder">Powered by <a href="https://workshops.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav">Workshops.DE</a></span>.
        </small>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Navigation</div>
        <ul class="footer-nav">
          <li><a href="/artikel/">Artikel</a></li>
          <li><a href="/tutorials/">Tutorials</a></li>
          <li><a href="/schulungen/">Schulungen</a></li>
          <li><a href="https://workshops.de/seminare-schulungen-kurse/angular-lifetime?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Lifetime</a></li>
          <li><a href="/meetups/">Meetups</a></li>
          <li><a href="/team/">Team</a></li>
          <li><a href="/presskit/">Presskit</a></li>
        </ul>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Communities</div>
        <ul class="footer-nav">
          <li><a href="https://reactjs.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">ReactJS.DE</a></li>
          <li><a href="https://vuejs.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">VueJS.DE</a></li>
          <li><a href="https://cloudnative.eu?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">CloudNative.EU</a></li>
          <li><a href="https://a11y-masterclass.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">a11y Masterclass</a></li>
          <li><a href="https://workshops.de?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Workshops.DE</a></li>
          <li><a href="https://www.coding-bootcamps.eu?utm_source=angular_de&utm_campaign=crossmarketing_permanent&utm_medium=portal&utm_content=footer_nav" target="_blank">Coding Bootcamp Europe</a></li>
          <li><a href="https://ng-de.org?utm_source=angular_de&utm_campaign=conference2025&utm_medium=portal&utm_content=footer_nav" target="_blank">NG-DE Konferenz</a></li>
        </ul>
      </div>
      <div class="col-6 col-sm-3 mb-2">
        <div class="h6 text-uppercase">Folge uns hier</div>
        <ul class="footer-nav">
          <li>
            <a href="https://twitter.com/angular_de" target="_blank" rel="noopener">Twitter</a>
          </li>
          <li>
            <a href="https://github.com/workshops-de" target="_blank" rel="noopener">GitHub</a>
          </li>
          <li><a href="/feed.xml" target="_blank" rel="nofollow">RSS-Feed</a></li>
        </ul>
      </div>
    </div>
    <hr />
    <div class="row align-items-center">
      <div class="col-6 small">
        Copyright © 2025 Symetics GmbH
      </div>
      <div class="col-6">
        <ul class="nav justify-content-end">
          <li class="nav-item">
            <a class="nav-link" href="/impressum/">Impressum</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/datenschutz/">Datenschutz</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>

  
  

  

  
  


  <script type="text/javascript">
  (() => {

    function lazyLoadImages() {
      var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

      if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.src = lazyImage.dataset.src;
              lazyImage.srcset = lazyImage.dataset.srcset;
              lazyImage.classList.remove("lazy");
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function(lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      } else {
        // Possibly fall back to a more compatible method here
        lazyImages.forEach(function(lazyImage) {
          lazyImage.src = lazyImage.dataset.src;
          lazyImage.srcset = lazyImage.dataset.srcset;
          lazyImage.classList.remove("lazy");
        });
      }
    }

    function lazyLoadBackgroundImages() {
      var lazyImages = [].slice.call(document.querySelectorAll("a.lazy"));

      if ("IntersectionObserver" in window) {
        let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.style = lazyImage.dataset.style;
              lazyImage.classList.remove("lazy");
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function(lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      } else {
        // Possibly fall back to a more compatible method here
        lazyImages.forEach(function(lazyImage) {
          lazyImage.src = lazyImage.dataset.src;
          lazyImage.srcset = lazyImage.dataset.srcset;
          lazyImage.classList.remove("lazy");
        });
      }
    }

    document.addEventListener("DOMContentLoaded", function() {
      lazyLoadImages();
      lazyLoadBackgroundImages();
      });
  })();
</script>

  <!-- JavaScript -->
  <script src="/shared/assets/js/vendor/jquery-3.2.1.slim.min.js"></script>
  <script src="/shared/assets/js/vendor/bootstrap.min.js"></script>
  <script src="/shared/assets/js/vendor/fp-3.0.0.min.js"></script>
  <script src="/shared/assets/js/vendor/headroom.min.js"></script>
  <script src="/shared/assets/js/app.js"></script>
  
  <script src="/shared/assets/js/vendor/bootstrap-toc-1.0.0.min.js"></script>
  
  
  
</body>

</html>
